# Wallarm Node - Обновление 2.8

## Изменения в системе

* Добавлена возможность блокировки IP‑адресов из черного списка в NGINX.
* Реализованы ограничения потребления памяти на обработку одного запроса.
* Добавлена поддержка форматов сжатия deflate и brotli в ответах HTTP.
* Расширены возможности мониторинга.
* Улучшения в логировании.

## Блокировка IP‑адресов из черного списка

Если раньше была возможность блокировать атакующих по IP только средствами пакетного фильтра iptables, то теперь вы можете активировать блокировку IP‑адресов с помощью самого NGINX.

Это проще в настройке и не требует интеграции с iptables, а также позволяет блокировать запросы даже в том случае, когда WAF‑нода расположена позади HTTP‑балансировщика.

[Подробнее...](../admin-en/configure-ip-blocking-en.md)

## Ограничение потребления памяти

Ранее ограничение памяти можно было настраивать только на весь воркер‑процесс. Теперь можно ограничивать как суммарное потребление памяти, так и потребление при обработке отдельных запросов.

Это делается с помощью директив:
* [wallarm_request_memory_limit](../admin-en/monitoring/available-metrics.md#количество-превышений-размера-виртуальной-памяти)
* [wallarm_ts_request_memory_limit](../admin-en/monitoring/available-metrics.md#количество-превышений-размера-виртуальной-памяти)

По умолчанию используется старый механизм ограничения памяти.

## Мониторинг

В вывод wallarm-status добавились новые параметры:
* [memfaults](../admin-en/monitoring/available-metrics.md#memfaults)
* [segfaults](../admin-en/monitoring/available-metrics.md#segfaults)

## Логирование

Формат сообщений об ошибках остался неизменным, но теперь появилась возможность гибко настраивать отладочные сообщения.

Логирование управляется директивами:
* [wallarm_proton_log_mask_master](../admin-en/configure-parameters-en.md#wallarm_proton_log_mask_master)
* [wallarm_proton_log_mask_worker](../admin-en/configure-parameters-en.md#wallarm_proton_log_mask_worker)
